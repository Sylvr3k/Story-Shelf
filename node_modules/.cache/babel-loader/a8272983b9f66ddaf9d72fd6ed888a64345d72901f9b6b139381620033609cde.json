{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Administrator/Desktop/React/projectimpoapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Administrator/Desktop/React/projectimpoapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/React/projectimpoapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export var UserContext=/*#__PURE__*/createContext();export var UserProvider=function UserProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){var _ref2;var fetchUserDetails=function fetchUserDetails(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=localStorage.getItem('token');if(token){_context.next=4;break;}setLoading(false);return _context.abrupt(\"return\");case 4:_context.prev=4;_context.next=7;return fetch('http://localhost:5009/user/profile',{method:'GET',headers:{'Authorization':\"Bearer \".concat(token)}});case 7:response=_context.sent;if(!response.ok){_context.next=15;break;}_context.next=11;return response.json();case 11:data=_context.sent;setUser(data);_context.next=16;break;case 15:console.error('Failed to fetch user details');case 16:_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](4);console.error('Error fetching user details:',_context.t0);case 21:_context.prev=21;setLoading(false);return _context.finish(21);case 24:case\"end\":return _context.stop();}},_callee,null,[[4,18,21,24]]);}))).apply(this,arguments);};fetchUserDetails();},[]);return/*#__PURE__*/_jsx(UserContext.Provider,{value:{user:user,setUser:setUser,loading:loading},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","jsx","_jsx","UserContext","UserProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","loading","setLoading","_ref2","fetchUserDetails","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response","data","wrap","_callee$","_context","prev","next","localStorage","getItem","abrupt","fetch","method","headers","concat","sent","ok","json","console","error","t0","finish","stop","apply","arguments","Provider","value"],"sources":["C:/Users/Administrator/Desktop/React/projectimpoapp/src/pages/UserContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\n\r\nexport const UserContext = createContext();\r\n\r\nexport const UserProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchUserDetails = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('http://localhost:5009/user/profile', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setUser(data);\r\n        } else {\r\n          console.error('Failed to fetch user details');\r\n        }\r\n      } catch (error) {\r\n          console.error('Error fetching user details:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserDetails();\r\n  }, []);\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, setUser, loading }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"2aAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElE,MAAO,IAAM,CAAAC,WAAW,cAAGL,aAAa,CAAC,CAAC,CAE1C,MAAO,IAAM,CAAAM,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACrC,IAAAC,SAAA,CAAwBR,QAAQ,CAAC,IAAI,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAA8Bb,QAAQ,CAAC,IAAI,CAAC,CAAAc,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAE1Bb,SAAS,CAAC,UAAM,KAAAgB,KAAA,CACd,GAAM,CAAAC,gBAAgB,SAAhB,CAAAA,gBAAgBA,CAAA,SAAAD,KAAA,CAAAA,KAAA,EAAAE,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,KAAA,CAAAC,QAAA,CAAAC,IAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACjBP,KAAK,CAAGQ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IACtCT,KAAK,EAAAK,QAAA,CAAAE,IAAA,UACRd,UAAU,CAAC,KAAK,CAAC,CAAC,OAAAY,QAAA,CAAAK,MAAA,kBAAAL,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAKK,CAAAI,KAAK,CAAC,oCAAoC,CAAE,CACjEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYd,KAAK,CAClC,CACF,CAAC,CAAC,QALIC,QAAQ,CAAAI,QAAA,CAAAU,IAAA,KAOVd,QAAQ,CAACe,EAAE,EAAAX,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UACM,CAAAN,QAAQ,CAACgB,IAAI,CAAC,CAAC,SAA5Bf,IAAI,CAAAG,QAAA,CAAAU,IAAA,CACV1B,OAAO,CAACa,IAAI,CAAC,CAACG,QAAA,CAAAE,IAAA,kBAEdW,OAAO,CAACC,KAAK,CAAC,8BAA8B,CAAC,CAAC,QAAAd,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAe,EAAA,CAAAf,QAAA,aAG9Ca,OAAO,CAACC,KAAK,CAAC,8BAA8B,CAAAd,QAAA,CAAAe,EAAO,CAAC,CAAC,QAAAf,QAAA,CAAAC,IAAA,IAEvDb,UAAU,CAAC,KAAK,CAAC,CAAC,OAAAY,QAAA,CAAAgB,MAAA,8BAAAhB,QAAA,CAAAiB,IAAA,MAAAvB,OAAA,uBAErB,IAAAwB,KAAA,MAAAC,SAAA,IAED7B,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEf,IAAA,CAACC,WAAW,CAAC4C,QAAQ,EAACC,KAAK,CAAE,CAAEtC,IAAI,CAAJA,IAAI,CAAEC,OAAO,CAAPA,OAAO,CAAEG,OAAO,CAAPA,OAAQ,CAAE,CAAAR,QAAA,CACrDA,QAAQ,CACW,CAAC,CAE3B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}